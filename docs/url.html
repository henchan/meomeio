<!DOCTYPE html>  <html> <head>   <title>url.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="html.html">                 html.js               </a>                                           <a class="source" href="url.html">                 url.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               url.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><a href="/js/app/content/process/url.js">url.js</a> holds synchronous url processing logic for meo.my adaptors. <br />
The adaptor.url() function is called asynchronously from the Chrome context page and executed in Chrome's background process.
It gets called by any active adaptor whose spec includes at least one active url item. <br />
The function of this code is to extract meta data from a given URL and return an array of tag strings  </p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>requires the library module <a href="https://github.com/garycourt/JSV/tree/master/lib/uri">uri.js</a> <br />
TODO evaluate and replace Crockford's regexp</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">URI</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;/libs/JSV/lib/uri/uri&quot;</span><span class="p">).</span><span class="nx">URI</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>adaptor.url ()</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">adaptor</span> <span class="o">=</span> <span class="nx">adaptor</span> <span class="o">||</span> <span class="p">{};</span>
<span class="nx">adaptor</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">adaptor</span><span class="p">,</span> <span class="p">{</span>
	<span class="s2">&quot;url&quot;</span> <span class="o">:</span>  <span class="kd">function</span> <span class="p">(</span><span class="nx">specs</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span>
	<span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>Parameters</h2>

<p><strong>schema</strong> is an object in the environment which gives a 'url' adaptor its logical structure and default values. 
For url schema's source, download <a href="/schema/adaptors/adaptor.json">adaptor.json</a> and search for </p>

<blockquote>
  <p>"id": "http://meo.my/versions/0.1.7/json-schema/adaptor/url"  </p>
</blockquote>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p><strong>specs</strong> is a vendor-supplied or user-defined adaptor array of objects. It is valid against the JSON Schema 'schema' parameter. <br />
<strong>url</strong> is the url upon which the function is to operate. Typically, it is the url of the window active in the Chrome browser's context page. <br />
initialise output array</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">tagArr</span> <span class="o">=</span> <span class="p">[],</span>
		<span class="nx">baseSchema</span> <span class="o">=</span> <span class="nx">schema</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">findSchema</span><span class="p">(</span><span class="s2">&quot;http://meo.my/versions/0.1.7/json-schema/adaptor/url&quot;</span><span class="p">)</span>
			<span class="p">.</span><span class="nx">_attributes</span><span class="p">.</span><span class="nx">properties</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>step through the specs object    </p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">for</span> <span class="p">(</span><span class="nx">h</span> <span class="k">in</span> <span class="nx">specs</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>process one spec at a time</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="nx">specs</span><span class="p">[</span><span class="nx">h</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>content is a json object, stored as a string in localStorage.
Consequently it needs to escape some characters</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="kd">var</span> <span class="nx">cont</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">URI</span><span class="p">.</span><span class="nx">unescapeComponent</span><span class="p">(</span><span class="nx">spec</span><span class="p">.</span><span class="nx">content</span><span class="p">));</span>				</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Stop if this spec does not contain a directive to process a url</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">if</span> <span class="p">(</span><span class="nx">cont</span> <span class="o">&amp;&amp;</span> <span class="nx">cont</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="nx">cont</span> <span class="o">=</span> <span class="nx">cont</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Validate that the input url conforms to standard. <br />
Break it into non-empty components.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="kd">var</span> <span class="nx">components</span> <span class="o">=</span> <span class="nx">common</span><span class="p">.</span><span class="nx">parseURL</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>					
					<span class="k">for</span> <span class="p">(</span><span class="nx">component</span> <span class="k">in</span> <span class="nx">components</span><span class="p">)</span> 
					<span class="p">{</span>
						<span class="kd">var</span> <span class="nx">comp</span> <span class="o">=</span> <span class="nx">components</span><span class="p">[</span><span class="nx">component</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>this component is in both the spec and the url, so we'll process it            </p>             </td>             <td class="code">               <div class="highlight"><pre>						<span class="k">if</span> <span class="p">(</span><span class="nx">cont</span><span class="p">[</span><span class="nx">component</span><span class="p">])</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>set the spec's default values for schema properties which are not explicitly mentioned in the adaptor spec</p>             </td>             <td class="code">               <div class="highlight"><pre>							<span class="nx">cont</span><span class="p">[</span><span class="nx">component</span><span class="p">]</span> <span class="o">=</span> 
								<span class="nx">common</span><span class="p">.</span><span class="nx">schemaDefaults</span> <span class="p">(</span>
										<span class="nx">baseSchema</span><span class="p">[</span><span class="nx">component</span><span class="p">],</span> <span class="nx">cont</span><span class="p">[</span><span class="nx">component</span><span class="p">]);</span>
							<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;spec after defaults: &#39;</span><span class="p">,</span> <span class="nx">component</span><span class="p">,</span> <span class="nx">cont</span><span class="p">[</span><span class="nx">component</span><span class="p">]);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>For some component types, simply append url component to output array</p>             </td>             <td class="code">               <div class="highlight"><pre>							<span class="k">if</span> <span class="p">(</span><span class="nx">component</span> <span class="o">===</span> <span class="s1">&#39;full&#39;</span><span class="p">)</span> <span class="p">{</span>
								<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span> 
							<span class="p">}</span>
							<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">component</span> <span class="o">===</span> <span class="s1">&#39;scheme&#39;</span><span class="p">)</span> <span class="p">{</span>
								<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span>	
							<span class="p">}</span>
							<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">component</span> <span class="o">===</span> <span class="s1">&#39;host&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>TODO add some sub-domain logic here</p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span>
							<span class="p">}</span>
							<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">component</span> <span class="o">===</span> <span class="s1">&#39;path&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>TODO add some path splitting logic here</p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span>
							<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Query parameters are processed before output</p>             </td>             <td class="code">               <div class="highlight"><pre>							<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">component</span> <span class="o">===</span> <span class="s1">&#39;query&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Parameters specifies which logic to use below</p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">cont</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">parameters</span><span class="p">;</span>
								<span class="k">if</span> <span class="p">(</span><span class="nx">cont</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">full</span><span class="p">)</span> <span class="p">{</span> </pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Entire query string</p>             </td>             <td class="code">               <div class="highlight"><pre>									<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span> 
								<span class="p">}</span>
								<span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">keys</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>false means no restriction by query key name</p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="nx">regexp</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">matching</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">keys</span><span class="p">.</span><span class="nx">matching</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="s1">&#39;/^*$/&#39;</span> <span class="o">:</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">matching</span><span class="p">)</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>split up the url query string into key/value pairs <br />
TODO review semi-colon query syntax</p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="nx">queryPairs</span> <span class="o">=</span> <span class="nx">comp</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>A single query value may have more than one tag in it.
+ is used by most search engines to separate search terms in the url <br />
e.g. http://www.google.com/search?q=json+query+default <br />
gives [json,query,default] as a result                                    </p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="nx">splitter</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">splitter</span><span class="p">,</span>
								<span class="nx">splitQv</span> <span class="o">=</span> <span class="nx">splitter</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> 
									<span class="k">typeof</span> <span class="nx">splitter</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">?</span> <span class="p">[</span><span class="nx">splitter</span><span class="p">]</span> <span class="o">:</span> <span class="nx">splitter</span><span class="p">,</span>
								<span class="nx">max</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">max</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>
								<span class="k">for</span> <span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">queryPairs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">max</span> <span class="o">||</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">);</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> 
								<span class="p">{</span>
									<span class="kd">var</span> <span class="nx">keyVal</span> <span class="o">=</span> <span class="nx">queryPairs</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">),</span>
										<span class="nx">key</span> <span class="o">=</span> <span class="nx">keyVal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">keyVal</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Either no key matching restriction is specified. Or the key matches a specified regular expression.</p>             </td>             <td class="code">               <div class="highlight"><pre>									<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">regexp</span> <span class="o">||</span> <span class="p">(</span><span class="nx">regexp</span> <span class="o">&amp;&amp;</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">key</span><span class="p">)))</span> 
										<span class="p">{</span>
											<span class="k">if</span> <span class="p">(</span><span class="nx">keys</span><span class="p">.</span><span class="nx">use</span><span class="p">)</span> <span class="p">{</span> <span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span> <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>convert url encoded values to their normal ascii values</p>             </td>             <td class="code">               <div class="highlight"><pre>											<span class="nx">val</span> <span class="o">=</span>
												<span class="nx">params</span><span class="p">.</span><span class="nx">decode</span> <span class="o">?</span> 
													<span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">:</span> <span class="nx">val</span><span class="p">;</span>												</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>strip leading and trailing whitespaces</p>             </td>             <td class="code">               <div class="highlight"><pre>											<span class="nx">val</span> <span class="o">=</span>
												<span class="nx">params</span><span class="p">.</span><span class="nx">strip_ws</span> <span class="o">?</span> 
														<span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s+|\s+$/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">val</span><span class="p">;</span>	</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>convert to all lower case, where supported by the character set</p>             </td>             <td class="code">               <div class="highlight"><pre>											<span class="nx">val</span> <span class="o">=</span> 
												<span class="nx">params</span><span class="p">.</span><span class="nx">lower_case</span> <span class="o">?</span>
													<span class="nx">val</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">:</span> <span class="nx">val</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>TODO chain the previous 3 tests                                                </p>             </td>             <td class="code">               <div class="highlight"><pre>											<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
											<span class="k">if</span> <span class="p">(</span><span class="nx">splitQv</span><span class="p">)</span> <span class="p">{</span>
												<span class="k">for</span> <span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">splitQv</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>an array of splitters is specified</p>             </td>             <td class="code">               <div class="highlight"><pre>													<span class="kd">var</span> <span class="nx">valueSplit</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="nx">splitQv</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span>
													<span class="k">if</span> <span class="p">(</span><span class="nx">valueSplit</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
														<span class="k">for</span> <span class="p">(</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">l</span><span class="o">&lt;</span><span class="nx">valueSplit</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">l</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
															<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">valueSplit</span><span class="p">[</span><span class="nx">l</span><span class="p">]);</span> 
														<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>at most, one effective splitter per value</p>             </td>             <td class="code">               <div class="highlight"><pre>														<span class="k">break</span><span class="p">;</span> 
													<span class="p">}</span>
												<span class="p">}</span>
											<span class="p">}</span>
										<span class="p">}</span>
									<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>TODO completion logic</p>             </td>             <td class="code">               <div class="highlight"><pre>									<span class="kd">var</span> <span class="nx">completion</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">completion</span><span class="p">;</span>
									<span class="k">if</span> <span class="p">(</span><span class="nx">completion</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>random completion tags</p>             </td>             <td class="code">               <div class="highlight"><pre>									<span class="p">}</span>
									<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">completion</span> <span class="o">&amp;&amp;</span> <span class="nx">completion</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>specified completion tag array</p>             </td>             <td class="code">               <div class="highlight"><pre>									<span class="p">}</span>
									
								<span class="p">}</span>
								<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">component</span> <span class="o">===</span> <span class="s1">&#39;hash&#39;</span><span class="p">)</span> <span class="p">{</span>
									<span class="nx">tagArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span>
								<span class="p">}</span>
							<span class="p">}</span>	 			
						<span class="p">}</span>	 				
					<span class="p">}</span>
				
	<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <h2>adaptor.url () returns</h2>

<p>returns an array of tags that were discovered in the url parameter.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;tagArr at the end&#39;</span><span class="p">,</span> <span class="nx">tagArr</span><span class="p">)</span>	<span class="p">;</span>
		<span class="k">return</span>  <span class="nx">tagArr</span> <span class="p">;</span>
	<span class="p">}</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <h2>Document status and license</h2>

<p>Published under a <a href="/couchapps/profile/_attachments/licenses/meo.my.mit.txt">MIT license</a>,
this is a source code fragment of a work-in-progress web application.
This file has been created for the purpose of a demonstration.
It is incomplete and not intended to be used as-is. <br />
Documentation created with <a href="http://jashkenas.github.com/docco/">docco</a>.  </p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 